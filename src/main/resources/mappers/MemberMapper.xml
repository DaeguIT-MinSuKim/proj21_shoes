<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="proj21_shoes.mapper.MemberMapper">

	<!-- resultMap type : dto 클래스명 , id : 외부에서 지정할이름? -->
	<!-- result column : db속 컬럼명, property : dto속 변수명 -->


 	 <resultMap type="Member" id="resMember">			
		<id column="member_code" property="memberCode" />									<!-- 회원코드 -->		
		<result column="point" property="point" />											<!-- 	포인트-->
		<result column="cumulative_buy_amount" property="cumulativeBuyAmount" />			<!-- 누적구매금액	 -->
		<result column="quit_state" property="quitState" />									<!-- 탈퇴여부 -->
		<result column="signUp_date" property="signUpDate" />								<!-- 가입일 -->
		<association property="memberId" javaType="MemberDetail"/>							<!-- 회원Id  -->
		<association property="gradeCode" javaType="Grade"/>								<!-- 회원 등급 -->
	</resultMap> 
	
	 
	 
	<select id="selectMemberAll"  resultMap="resMember">
	select member_code, member_id, point, cumulative_buy_amount, grade_code, quit_state, signUp_date from member
	</select>


	<insert id="insertMember">
	INSERT INTO member
	(member_id, point, cumulative_buy_amount, grade_code, quit_state, signUp_date)
	VALUES(#{memberId.memberId}, 1000, 0, 1, false, now());
	</insert>
	
	<select id="selectMemberByMCode" parameterType="int" resultMap="resMember">
		select member_code, member_id, point, cumulative_buy_amount, grade_code, quit_state, signUp_date 
		from member
		where member_code = #{memberCode}

	
	
	</select>
	<select id="selectMemberById" resultMap="resMember">
		select member_code, member_id, point, cumulative_buy_amount, grade_code, quit_state, signUp_date 
		from member
		where member_id = #{memberId}

	
	
	</select>
</mapper>



